{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\USER\\\\Documents\\\\flexiMoney-web-app\\\\src\\\\features\\\\users\\\\index.js\";\nimport React, { useEffect, useState } from 'react';\nimport { connect } from 'react-redux';\nimport styles from './index.module.scss';\nimport axios from 'axios';\nimport { setCurrentPage } from '../../actions/page';\nimport { setDisplayModal } from '../../actions/modal';\nimport { useCustomToast } from '../../components/toast/useCustomToast';\nimport userGroup from \"../../assets/icons/users.svg\";\nimport ListUsers from './ListUsers';\nimport { LIST_USERS, DELETE_USER } from '../../utils/constants';\nexport const Users = ({\n  changeCurrentPage,\n  displayModal,\n  modalIsUpdated\n}) => {\n  const [isUpdated, setIsUpdated] = useState(false);\n  const [users, setUsers] = useState([]);\n  const [loading, setLoading] = useState(false);\n  constToast = useToasts();\n  useEffect(() => {\n    let isCancelled;\n    (async function listUsers() {\n      setLoading(true);\n      try {\n        const res = await axios.get(LIST_USERS);\n        const users = res.data.data;\n        if (!isCancelled) {\n          setUsers(users);\n        }\n      } catch (e) {\n        // console.log(e);\n      } finally {\n        setLoading(false);\n      }\n    })();\n    return () => {\n      isCancelled = true;\n    };\n  }, [modalIsUpdated]);\n  const handleDeleteUser = id => {\n    const getConfirmation = window.confirm('Do you want to deactivate user?');\n    if (getConfirmation) {\n      (async function deleteUser() {\n        try {\n          const res = await axios.delete(`${DELETE_USER}/${id}`);\n          if (res) {\n            addToast('User deleted successfully', {\n              appearance: 'success',\n              autoDismiss: true\n            });\n            (async function listUsers() {\n              setLoading(true);\n              try {\n                const res = await axios.get(LIST_USERS);\n                const users = res.data.data;\n                setUsers(users);\n              } catch (e) {} finally {\n                setLoading(false);\n              }\n            })();\n          }\n        } catch (e) {\n          addToast('User not deleted', {\n            appearance: 'error',\n            autoDismiss: true\n          });\n        } finally {\n          setIsUpdated(id);\n        }\n      })();\n    }\n  };\n  useEffect(() => {\n    changeCurrentPage({\n      heading: 'List Users',\n      search: true\n    });\n  }, [changeCurrentPage]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.container,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.menu,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.card,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    className: styles.sectionHeading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 21\n    }\n  }, \"User management\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.services,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.service,\n    onClick: () => {\n      displayModal({\n        overlay: true,\n        modal: 'addUsers',\n        service: ''\n      });\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    className: styles.serviceLogo,\n    src: userGroup,\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    className: styles.serviceText,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 29\n    }\n  }, \"Add User\"))))), /*#__PURE__*/React.createElement(ListUsers, {\n    users: users,\n    handleDeleteUser: handleDeleteUser,\n    isUpdated: isUpdated,\n    loading: loading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 13\n    }\n  }));\n};\nconst mapStateToProps = state => {\n  return {\n    modalIsUpdated: state.modal.modalIsUpdated\n  };\n};\nconst mapDispatchToProps = dispatch => {\n  return {\n    changeCurrentPage: payload => dispatch(setCurrentPage(payload)),\n    displayModal: payload => dispatch(setDisplayModal(payload))\n  };\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(Users);","map":{"version":3,"names":["React","useEffect","useState","connect","styles","axios","setCurrentPage","setDisplayModal","useCustomToast","userGroup","ListUsers","LIST_USERS","DELETE_USER","Users","changeCurrentPage","displayModal","modalIsUpdated","isUpdated","setIsUpdated","users","setUsers","loading","setLoading","constToast","useToasts","isCancelled","listUsers","res","get","data","e","handleDeleteUser","id","getConfirmation","window","confirm","deleteUser","delete","addToast","appearance","autoDismiss","heading","search","createElement","className","container","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","menu","card","sectionHeading","services","service","onClick","overlay","modal","serviceLogo","src","alt","serviceText","mapStateToProps","state","mapDispatchToProps","dispatch","payload"],"sources":["C:/Users/USER/Documents/flexiMoney-web-app/src/features/users/index.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport styles from './index.module.scss';\r\nimport axios from 'axios';\r\n\r\nimport { setCurrentPage } from '../../actions/page';\r\nimport { setDisplayModal } from '../../actions/modal';\r\nimport { useCustomToast } from '../../components/toast/useCustomToast';\r\n\r\nimport userGroup from '../../assets/icons/users.svg';\r\n\r\nimport ListUsers from './ListUsers';\r\nimport { LIST_USERS, DELETE_USER } from '../../utils/constants';\r\n\r\nexport const Users = ({ changeCurrentPage, displayModal, modalIsUpdated }) => {\r\n    const [isUpdated, setIsUpdated] = useState(false);\r\n    const [users, setUsers] = useState([]);\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    constToast  = useToasts();\r\n\r\n    useEffect(() => {\r\n        let isCancelled;\r\n\r\n        (async function listUsers() {\r\n            setLoading(true);\r\n\r\n            try {\r\n                const res = await axios.get(LIST_USERS);\r\n                const users = res.data.data;\r\n\r\n                if (!isCancelled) {\r\n                    setUsers(users);\r\n                }\r\n            } catch (e) {\r\n                // console.log(e);\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        })();\r\n\r\n        return () => {\r\n            isCancelled = true;\r\n        };\r\n    }, [modalIsUpdated]);\r\n\r\n    const handleDeleteUser = (id) => {\r\n        const getConfirmation = window.confirm(\r\n            'Do you want to deactivate user?'\r\n        );\r\n\r\n        if (getConfirmation) {\r\n            (async function deleteUser() {\r\n                try {\r\n                    const res = await axios.delete(`${DELETE_USER}/${id}`);\r\n\r\n                    if (res) {\r\n                        addToast('User deleted successfully', {\r\n                            appearance: 'success',\r\n                            autoDismiss: true,\r\n                        });\r\n\r\n                        (async function listUsers() {\r\n                            setLoading(true);\r\n\r\n                            try {\r\n                                const res = await axios.get(LIST_USERS);\r\n                                const users = res.data.data;\r\n\r\n                                setUsers(users);\r\n                            } catch (e) {\r\n                            } finally {\r\n                                setLoading(false);\r\n                            }\r\n                        })();\r\n                    }\r\n                } catch (e) {\r\n                    addToast('User not deleted', {\r\n                        appearance: 'error',\r\n                        autoDismiss: true,\r\n                    });\r\n                } finally {\r\n                    setIsUpdated(id);\r\n                }\r\n            })();\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        changeCurrentPage({\r\n            heading: 'List Users',\r\n            search: true,\r\n        });\r\n    }, [changeCurrentPage]);\r\n\r\n    return (\r\n        <div className={styles.container}>\r\n            <div className={styles.menu}>\r\n                <div className={styles.card}>\r\n                    <h3 className={styles.sectionHeading}>User management</h3>\r\n                    <div className={styles.services}>\r\n                        <div\r\n                            className={styles.service}\r\n                            onClick={() => {\r\n                                displayModal({\r\n                                    overlay: true,\r\n                                    modal: 'addUsers',\r\n                                    service: '',\r\n                                });\r\n                            }}\r\n                        >\r\n                            <img\r\n                                className={styles.serviceLogo}\r\n                                src={userGroup}\r\n                                alt=''\r\n                            />\r\n                            <p className={styles.serviceText}>Add User</p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <ListUsers\r\n                users={users}\r\n                handleDeleteUser={handleDeleteUser}\r\n                isUpdated={isUpdated}\r\n                loading={loading}\r\n            />\r\n        </div>\r\n    );\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        modalIsUpdated: state.modal.modalIsUpdated,\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        changeCurrentPage: (payload) => dispatch(setCurrentPage(payload)),\r\n        displayModal: (payload) => dispatch(setDisplayModal(payload)),\r\n    };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Users);\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}