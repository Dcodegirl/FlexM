{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\USER\\\\Documents\\\\flexiMoney-web-app\\\\src\\\\features\\\\users\\\\index.js\";\nimport React, { useEffect, useState } from 'react';\nimport { connect } from 'react-redux';\nimport styles from './index.module.scss';\nimport axios from 'axios';\nimport { setCurrentPage } from '../../actions/page';\nimport { setDisplayModal } from '../../actions/modal';\nimport { useCustomToast } from '../../components/toast/useCustomToast';\nimport userGroup from \"../../assets/icons/users.svg\";\nimport ListUsers from './ListUsers';\nimport { LIST_USERS, DELETE_USER } from '../../utils/constants';\nexport const Users = ({\n  changeCurrentPage,\n  displayModal,\n  modalIsUpdated\n}) => {\n  const [isUpdated, setIsUpdated] = useState(false);\n  const [users, setUsers] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const showToast = useCustomToast();\n  useEffect(() => {\n    let isCancelled;\n    (async function listUsers() {\n      setLoading(true);\n      try {\n        const res = await axios.get(LIST_USERS);\n        const users = res.data.data;\n        if (!isCancelled) {\n          setUsers(users);\n        }\n      } catch (e) {} finally {\n        setLoading(false);\n      }\n    })();\n    return () => {\n      isCancelled = true;\n    };\n  }, [modalIsUpdated]);\n  const handleDeleteUser = id => {\n    const getConfirmation = window.confirm('Do you want to deactivate user?');\n    if (getConfirmation) {\n      (async function deleteUser() {\n        try {\n          const res = await axios.delete(`${DELETE_USER}/${id}`);\n          if (res) {\n            showToast('User deleted successfully', 'success');\n            (async function listUsers() {\n              setLoading(true);\n              try {\n                const res = await axios.get(LIST_USERS);\n                const users = res.data.data;\n                setUsers(users);\n              } catch (e) {} finally {\n                setLoading(false);\n              }\n            })();\n          }\n        } catch (e) {\n          showToast('User not deleted', 'error');\n        } finally {\n          setIsUpdated(id);\n        }\n      })();\n    }\n  };\n  useEffect(() => {\n    changeCurrentPage({\n      heading: 'List Users',\n      search: true\n    });\n  }, [changeCurrentPage]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.container,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.menu,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.card,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    className: styles.sectionHeading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 21\n    }\n  }, \"User management\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.services,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.service,\n    onClick: () => {\n      displayModal({\n        overlay: true,\n        modal: 'addUsers',\n        service: ''\n      });\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    className: styles.serviceLogo,\n    src: userGroup,\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    className: styles.serviceText,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 29\n    }\n  }, \"Add User\"))))), /*#__PURE__*/React.createElement(ListUsers, {\n    users: users,\n    handleDeleteUser: handleDeleteUser,\n    isUpdated: isUpdated,\n    loading: loading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 13\n    }\n  }));\n};\nconst mapStateToProps = state => {\n  return {\n    modalIsUpdated: state.modal.modalIsUpdated\n  };\n};\nconst mapDispatchToProps = dispatch => {\n  return {\n    changeCurrentPage: payload => dispatch(setCurrentPage(payload)),\n    displayModal: payload => dispatch(setDisplayModal(payload))\n  };\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(Users);","map":{"version":3,"names":["React","useEffect","useState","connect","styles","axios","setCurrentPage","setDisplayModal","useCustomToast","userGroup","ListUsers","LIST_USERS","DELETE_USER","Users","changeCurrentPage","displayModal","modalIsUpdated","isUpdated","setIsUpdated","users","setUsers","loading","setLoading","showToast","isCancelled","listUsers","res","get","data","e","handleDeleteUser","id","getConfirmation","window","confirm","deleteUser","delete","heading","search","createElement","className","container","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","menu","card","sectionHeading","services","service","onClick","overlay","modal","serviceLogo","src","alt","serviceText","mapStateToProps","state","mapDispatchToProps","dispatch","payload"],"sources":["C:/Users/USER/Documents/flexiMoney-web-app/src/features/users/index.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport styles from './index.module.scss';\r\nimport axios from 'axios';\r\n\r\nimport { setCurrentPage } from '../../actions/page';\r\nimport { setDisplayModal } from '../../actions/modal';\r\nimport { useCustomToast } from '../../components/toast/useCustomToast';\r\n\r\nimport userGroup from '../../assets/icons/users.svg';\r\n\r\nimport ListUsers from './ListUsers';\r\nimport { LIST_USERS, DELETE_USER } from '../../utils/constants';\r\n\r\nexport const Users = ({ changeCurrentPage, displayModal, modalIsUpdated }) => {\r\n    const [isUpdated, setIsUpdated] = useState(false);\r\n    const [users, setUsers] = useState([]);\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    const showToast  = useCustomToast();\r\n\r\n    useEffect(() => {\r\n        let isCancelled;\r\n\r\n        (async function listUsers() {\r\n            setLoading(true);\r\n\r\n            try {\r\n                const res = await axios.get(LIST_USERS);\r\n                const users = res.data.data;\r\n\r\n                if (!isCancelled) {\r\n                    setUsers(users);\r\n                }\r\n            } catch (e) {\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        })();\r\n\r\n        return () => {\r\n            isCancelled = true;\r\n        };\r\n    }, [modalIsUpdated]);\r\n\r\n    const handleDeleteUser = (id) => {\r\n        const getConfirmation = window.confirm(\r\n            'Do you want to deactivate user?'\r\n        );\r\n\r\n        if (getConfirmation) {\r\n            (async function deleteUser() {\r\n                try {\r\n                    const res = await axios.delete(`${DELETE_USER}/${id}`);\r\n\r\n                    if (res) {\r\n                        showToast('User deleted successfully', 'success');\r\n\r\n                        (async function listUsers() {\r\n                            setLoading(true);\r\n\r\n                            try {\r\n                                const res = await axios.get(LIST_USERS);\r\n                                const users = res.data.data;\r\n\r\n                                setUsers(users);\r\n                            } catch (e) {\r\n                            } finally {\r\n                                setLoading(false);\r\n                            }\r\n                        })();\r\n                    }\r\n                } catch (e) {\r\n                    showToast('User not deleted', 'error');\r\n                } finally {\r\n                    setIsUpdated(id);\r\n                }\r\n            })();\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        changeCurrentPage({\r\n            heading: 'List Users',\r\n            search: true,\r\n        });\r\n    }, [changeCurrentPage]);\r\n\r\n    return (\r\n        <div className={styles.container}>\r\n            <div className={styles.menu}>\r\n                <div className={styles.card}>\r\n                    <h3 className={styles.sectionHeading}>User management</h3>\r\n                    <div className={styles.services}>\r\n                        <div\r\n                            className={styles.service}\r\n                            onClick={() => {\r\n                                displayModal({\r\n                                    overlay: true,\r\n                                    modal: 'addUsers',\r\n                                    service: '',\r\n                                });\r\n                            }}\r\n                        >\r\n                            <img\r\n                                className={styles.serviceLogo}\r\n                                src={userGroup}\r\n                                alt=''\r\n                            />\r\n                            <p className={styles.serviceText}>Add User</p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <ListUsers\r\n                users={users}\r\n                handleDeleteUser={handleDeleteUser}\r\n                isUpdated={isUpdated}\r\n                loading={loading}\r\n            />\r\n        </div>\r\n    );\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        modalIsUpdated: state.modal.modalIsUpdated,\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        changeCurrentPage: (payload) => dispatch(setCurrentPage(payload)),\r\n        displayModal: (payload) => dispatch(setDisplayModal(payload)),\r\n    };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Users);\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}