{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\USER\\\\Documents\\\\flexiMoney-web-app\\\\src\\\\features\\\\services\\\\commissionTransfer\\\\CommissionTransfer.js\";\nimport React, { useEffect, useState, useReducer } from \"react\";\nimport axios from \"axios\";\nimport commissionReducer, { initialState } from \"./commission-reducer\";\nimport { COMMISSION_TRANSFER } from \"../../../utils/constants\";\nimport CommissionForm from \"./Commissionform\";\nimport CommissionTransferStatus from \"./CommissionStatus\";\nimport CommissionTransferSummary from \"./CommissionSummary\";\nimport FailedTransaction from \"../../../components/common/FailedTransaction\";\nimport styles from \"./CommissionTransfer.module.scss\";\nexport const CommissionTransfer = () => {\n  const [transferDetails, dispatch] = useReducer(commissionReducer, initialState);\n  const [status, setStatus] = useState(\"form\");\n  const [successData, setSuccessData] = useState({});\n  const [loading, setLoading] = useState(false);\n  const [transactionDate, setTransactionDate] = useState(null);\n  const [agentLocation, setAgentLocation] = useState(null);\n  const [isError, setIsError] = useState();\n  useEffect(() => {\n    if (\"geolocation\" in navigator) {\n      navigator.geolocation.getCurrentPosition(function (position) {\n        setAgentLocation({\n          latitude: position.coords.latitude,\n          longitude: position.coords.longitude\n        });\n      });\n    }\n  }, []);\n  const getTransactionDate = date => {\n    const dateString = date.toString();\n    return dateString.slice(0, 24);\n  };\n  const handleCommissionTransfer = () => {\n    setLoading(true);\n    const {\n      amount\n    } = transferDetails;\n    const req = {\n      amount\n    };\n    (async function transferFunds() {\n      try {\n        const options = {\n          headers: {\n            lat: agentLocation === null || agentLocation === void 0 ? void 0 : agentLocation.latitude,\n            lng: agentLocation === null || agentLocation === void 0 ? void 0 : agentLocation.longitude\n          }\n        };\n        const res = await axios.post(COMMISSION_TRANSFER, req, options);\n        const date = new Date();\n        const transactionDate = getTransactionDate(date);\n        setTransactionDate(transactionDate);\n        setSuccessData(res.data.data);\n        setStatus(\"status\");\n      } catch (error) {\n        setStatus(\"failed\");\n        setIsError(error.response.data.message);\n      }\n    })();\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.container,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 5\n    }\n  }, {\n    form: /*#__PURE__*/React.createElement(CommissionForm, {\n      dispatch: dispatch,\n      setStatus: setStatus,\n      state: transferDetails,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 13\n      }\n    }),\n    summary: /*#__PURE__*/React.createElement(CommissionTransferSummary, {\n      handleCommissionTransfer: handleCommissionTransfer,\n      loading: loading,\n      state: transferDetails,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 13\n      }\n    }),\n    status: /*#__PURE__*/React.createElement(CommissionTransferStatus, {\n      date: transactionDate,\n      successData: successData,\n      setStatus: setStatus,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 13\n      }\n    }),\n    failed: /*#__PURE__*/React.createElement(FailedTransaction, {\n      message: isError,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 19\n      }\n    })\n  }[status]);\n};\nexport default CommissionTransfer;","map":{"version":3,"names":["React","useEffect","useState","useReducer","axios","commissionReducer","initialState","COMMISSION_TRANSFER","CommissionForm","CommissionTransferStatus","CommissionTransferSummary","FailedTransaction","styles","CommissionTransfer","transferDetails","dispatch","status","setStatus","successData","setSuccessData","loading","setLoading","transactionDate","setTransactionDate","agentLocation","setAgentLocation","isError","setIsError","navigator","geolocation","getCurrentPosition","position","latitude","coords","longitude","getTransactionDate","date","dateString","toString","slice","handleCommissionTransfer","amount","req","transferFunds","options","headers","lat","lng","res","post","Date","data","error","response","message","createElement","className","container","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","form","state","summary","failed"],"sources":["C:/Users/USER/Documents/flexiMoney-web-app/src/features/services/commissionTransfer/CommissionTransfer.js"],"sourcesContent":["import React, { useEffect, useState, useReducer } from \"react\";\r\nimport axios from \"axios\";\r\nimport commissionReducer, { initialState } from \"./commission-reducer\";\r\nimport { COMMISSION_TRANSFER } from \"../../../utils/constants\";\r\nimport CommissionForm from \"./Commissionform\";\r\nimport CommissionTransferStatus from \"./CommissionStatus\";\r\nimport CommissionTransferSummary from \"./CommissionSummary\";\r\nimport FailedTransaction from \"../../../components/common/FailedTransaction\";\r\nimport styles from \"./CommissionTransfer.module.scss\";\r\n\r\nexport const CommissionTransfer = () => {\r\n  const [transferDetails, dispatch] = useReducer(commissionReducer, initialState);\r\n  const [status, setStatus] = useState(\"form\");\r\n  const [successData, setSuccessData] = useState({});\r\n  const [loading, setLoading] = useState(false);\r\n  const [transactionDate, setTransactionDate] = useState(null);\r\n  const [agentLocation, setAgentLocation] = useState(null);\r\n  const [isError, setIsError] =useState()\r\n  useEffect(() => {\r\n    if (\"geolocation\" in navigator) {\r\n      navigator.geolocation.getCurrentPosition(function (position) {\r\n        setAgentLocation({\r\n          latitude: position.coords.latitude,\r\n          longitude: position.coords.longitude,\r\n        });\r\n      });\r\n    }\r\n  }, []);\r\n\r\n  const getTransactionDate = (date) => {\r\n    const dateString = date.toString();\r\n    return dateString.slice(0, 24);\r\n  };\r\n\r\n  const handleCommissionTransfer = () => {\r\n    setLoading(true);\r\n\r\n    const { amount} = transferDetails;\r\n\r\n    const req = {\r\n      amount,\r\n    };\r\n\r\n    (async function transferFunds() {\r\n      try {\r\n        const options = {\r\n          headers: {\r\n            lat: agentLocation?.latitude,\r\n            lng: agentLocation?.longitude,\r\n          },\r\n        };\r\n\r\n        const res = await axios.post(COMMISSION_TRANSFER, req,options,);\r\n        const date = new Date();\r\n        const transactionDate = getTransactionDate(date);\r\n\r\n        setTransactionDate(transactionDate);\r\n        setSuccessData(res.data.data);\r\n        setStatus(\"status\");\r\n      } catch (error) {\r\n        setStatus(\"failed\");\r\n        setIsError(error.response.data.message)\r\n       \r\n      }\r\n    })();\r\n  };\r\n\r\n  return (\r\n    <div className={styles.container}>\r\n      {\r\n        {\r\n          form: (\r\n            <CommissionForm\r\n              dispatch={dispatch}\r\n              setStatus={setStatus}\r\n              state={transferDetails}\r\n            />\r\n          ),\r\n          summary: (\r\n            <CommissionTransferSummary\r\n              handleCommissionTransfer={handleCommissionTransfer}\r\n              loading={loading}\r\n              state={transferDetails}\r\n            />\r\n          ),\r\n          status: (\r\n            <CommissionTransferStatus\r\n              date={transactionDate}\r\n              successData={successData}\r\n              setStatus={setStatus}\r\n            />\r\n          ),\r\n          failed: <FailedTransaction message={isError}/>,\r\n        }[status]\r\n      }\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CommissionTransfer;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}