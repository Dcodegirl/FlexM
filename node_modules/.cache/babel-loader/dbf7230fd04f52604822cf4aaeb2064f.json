{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\USER\\\\Documents\\\\flexiMoney-web-app\\\\src\\\\features\\\\dashboard\\\\modal\\\\ConfirmTerminalModal\\\\index.jsx\";\nimport React, { useState } from \"react\";\nimport money from \"../../../../assets/icons/Money.svg\";\nimport axios from \"../../../../utils/axiosInstance\";\nimport { useSelector } from 'react-redux';\nimport { useCustomToast } from \"../../../../components/toast/useCustomToast\";\nimport { _AGENT_TERMINAL } from \"../../../../utils/constants\";\nconst ConfirmTerminalModal = ({\n  isOpen,\n  onConfirm,\n  onCancel,\n  selectedTerminalId,\n  selectedSerialNumber,\n  agentName,\n  agentId\n}) => {\n  // const agentId = useSelector((state) => state.auth.user?.id);\n  const showToast = useCustomToast();\n  const [loading, setLoading] = useState('');\n  const handleConfirmClick = async () => {\n    try {\n      setLoading(true);\n      // Make the API call to /agent/terminal with the selected values\n      const response = await axios.patch(PATCH_AGENT_TERMINAL, {\n        agent_id: agentId,\n        terminal_id: selectedTerminalId,\n        terminal_serial: selectedSerialNumber\n      });\n\n      // Check if the response status is successful\n      if (response.status === 201) {\n        // Handle the response as needed\n        console.log(\"API Response:\", response.data);\n        showToast(\"Terminal assigned successfully\", 'success');\n        setLoading(false);\n\n        // Trigger the onConfirm callback\n        onConfirm();\n      } else {\n        // Handle other types of errors\n        handleApiError(response);\n      }\n    } catch (error) {\n      // Handle network or other errors\n      setLoading(false);\n      handleApiError(error);\n    }\n  };\n  const handleApiError = error => {\n    console.error(\"Error confirming terminal:\", error);\n    if (error.response) {\n      // The request was made and the server responded with a status code\n      const {\n        status,\n        data\n      } = error.response;\n      if (status === 400 && data && data.message === \"Terminal already assigned\") {\n        showToast(\"Terminal already assigned\", 'error');\n        setLoading(false);\n      } else {\n        // Handle other types of errors\n        showToast(\"Error assigning terminal. Please try again.\", 'error');\n        setLoading(false);\n      }\n    } else {\n      // Handle other types of errors\n      showToast(\"Error assigning terminal. Please try again.\", 'error');\n    }\n    setLoading(false);\n    // Trigger the onConfirm callback\n    onConfirm();\n  };\n  console.log('selected transaction info: ', agentName);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: `${isOpen ? \"opacity-100 visible\" : \"opacity-0 invisible\"} fixed inset-0 z-50 transition-opacity ease-in-out duration-300`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex items-center justify-center min-h-screen\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"bg-white rounded-lg overflow-hidden shadow-xl transform transition-all max-w-md w-full  text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"bg-[#f9f9f9] px-12 py-6 text-white text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    className: \"text-2xl font-bold text-[#111023]\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 13\n    }\n  }, \"Assign Terminal\"), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"text-sm text-[#A59696]\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 13\n    }\n  }, \"Assign Terminal to the Agents to start transacting seamlessly\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"w-full px-8 py-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex justify-center py-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: money,\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 13\n    }\n  }, \"You\\u2019re assigning Terminal with ID \", selectedTerminalId, \" to \", agentName, \" with the Serial No \", selectedSerialNumber)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex justify-center space-x-4 py-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    onClick: handleConfirmClick,\n    className: `bg-color1  rounded-md  px-6 py-3  text-white  relative ${loading ? 'opacity-50 pointer-events-none' : ''}`,\n    disabled: loading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 15\n    }\n  }, loading && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"loader\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 21\n    }\n  })), loading ? 'Confirming...' : 'Confirm'), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"bg-red-500 text-white px-6 py-3 rounded-md hover:bg-red-600\",\n    onClick: onCancel,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 15\n    }\n  }, \"Cancel\"))))));\n};\nexport default ConfirmTerminalModal;","map":{"version":3,"names":["React","useState","money","axios","useSelector","useCustomToast","_AGENT_TERMINAL","ConfirmTerminalModal","isOpen","onConfirm","onCancel","selectedTerminalId","selectedSerialNumber","agentName","agentId","showToast","loading","setLoading","handleConfirmClick","response","patch","PATCH_AGENT_TERMINAL","agent_id","terminal_id","terminal_serial","status","console","log","data","handleApiError","error","message","createElement","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","src","alt","type","onClick","disabled"],"sources":["C:/Users/USER/Documents/flexiMoney-web-app/src/features/dashboard/modal/ConfirmTerminalModal/index.jsx"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport money from '../../../../assets/icons/Money.svg'\r\nimport axios from \"../../../../utils/axiosInstance\";\r\nimport { useSelector } from 'react-redux';\r\nimport { useCustomToast } from \"../../../../components/toast/useCustomToast\";\r\nimport { _AGENT_TERMINAL } from \"../../../../utils/constants\";\r\n\r\n\r\nconst ConfirmTerminalModal = ({ isOpen, onConfirm, onCancel, selectedTerminalId, selectedSerialNumber , agentName, agentId }) => {\r\n  // const agentId = useSelector((state) => state.auth.user?.id);\r\n  const showToast = useCustomToast();\r\n  const [loading, setLoading] = useState('');\r\nconst handleConfirmClick = async () => {\r\n  try {\r\n    setLoading(true);\r\n    // Make the API call to /agent/terminal with the selected values\r\n    const response = await axios.patch(PATCH_AGENT_TERMINAL, {\r\n      agent_id: agentId,\r\n      terminal_id: selectedTerminalId,\r\n      terminal_serial: selectedSerialNumber,\r\n    });\r\n\r\n    // Check if the response status is successful\r\n    if (response.status === 201) {\r\n      // Handle the response as needed\r\n      console.log(\"API Response:\", response.data);\r\n      showToast(\"Terminal assigned successfully\", 'success');\r\n      setLoading(false);\r\n\r\n      // Trigger the onConfirm callback\r\n      onConfirm();\r\n    } else {\r\n      // Handle other types of errors\r\n      handleApiError(response);\r\n    }\r\n  } catch (error) {\r\n    // Handle network or other errors\r\n    setLoading(false);\r\n    handleApiError(error);\r\n  }\r\n};\r\n\r\nconst handleApiError = (error) => {\r\n  console.error(\"Error confirming terminal:\", error);\r\n\r\n  if (error.response) {\r\n    // The request was made and the server responded with a status code\r\n    const { status, data } = error.response;\r\n    if (status === 400 && data && data.message === \"Terminal already assigned\") {\r\n      showToast(\"Terminal already assigned\", 'error');\r\n      setLoading(false);\r\n    } else {\r\n      // Handle other types of errors\r\n      showToast(\"Error assigning terminal. Please try again.\", 'error');\r\n      setLoading(false);\r\n    }\r\n  } else {\r\n    // Handle other types of errors\r\n    showToast(\"Error assigning terminal. Please try again.\", 'error');\r\n  }\r\n  setLoading(false);\r\n  // Trigger the onConfirm callback\r\n  onConfirm();\r\n};\r\n\r\n\r\n  console.log('selected transaction info: ', agentName)\r\n  return (\r\n    <div\r\n      className={`${\r\n        isOpen ? \"opacity-100 visible\" : \"opacity-0 invisible\"\r\n      } fixed inset-0 z-50 transition-opacity ease-in-out duration-300`}\r\n    >\r\n      <div className=\"flex items-center justify-center min-h-screen\">\r\n        <div className=\"bg-white rounded-lg overflow-hidden shadow-xl transform transition-all max-w-md w-full  text-center\">\r\n          <div className=\"\">\r\n          <div className=\"bg-[#f9f9f9] px-12 py-6 text-white text-center\">\r\n            <h2 className=\"text-2xl font-bold text-[#111023]\">Assign Terminal</h2>\r\n            <p className=\"text-sm text-[#A59696]\">Assign Terminal to the Agents to start transacting seamlessly</p>\r\n          </div>\r\n          <div className=\"w-full px-8 py-4\">\r\n            <div className=\"flex justify-center py-6\">\r\n                <img src={money} alt=\"\" />\r\n            </div>\r\n            <p>You’re assigning Terminal with ID {selectedTerminalId} to {agentName} with the Serial No {selectedSerialNumber}</p>\r\n            {/* <p>You’re assigning Terminal to this agent</p> */}\r\n          </div>\r\n            <div className=\"flex justify-center space-x-4 py-4\">\r\n              {/* <button\r\n                className=\"bg-cico1 text-white px-6 py-3 rounded-md hover:bg-bg-green hover:text-black\"\r\n                onClick={handleConfirmClick}\r\n              >\r\n                Confirm\r\n              </button> */}\r\n              <button\r\n                type=\"submit\"\r\n                onClick={handleConfirmClick}\r\n                className={`bg-color1  rounded-md  px-6 py-3  text-white  relative ${\r\n                  loading ? 'opacity-50 pointer-events-none' : ''\r\n                }`}\r\n                disabled={loading}\r\n              >\r\n                {loading && (\r\n                  <div className=\"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2\">\r\n                    <div className=\"loader\"></div>\r\n                  </div>\r\n                )}\r\n                {loading ? 'Confirming...' : 'Confirm'}\r\n              </button>\r\n              <button\r\n                className=\"bg-red-500 text-white px-6 py-3 rounded-md hover:bg-red-600\"\r\n                onClick={onCancel}\r\n              >\r\n                Cancel\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ConfirmTerminalModal;\r\n"],"mappings":";AAAA,OAAOA,KAAK,IAAIC,QAAQ,QAAQ,OAAO;AAAC,OAAAC,KAAA;AAExC,OAAOC,KAAK,MAAM,iCAAiC;AACnD,SAASC,WAAW,QAAQ,aAAa;AACzC,SAASC,cAAc,QAAQ,6CAA6C;AAC5E,SAASC,eAAe,QAAQ,6BAA6B;AAG7D,MAAMC,oBAAoB,GAAGA,CAAC;EAAEC,MAAM;EAAEC,SAAS;EAAEC,QAAQ;EAAEC,kBAAkB;EAAEC,oBAAoB;EAAGC,SAAS;EAAEC;AAAQ,CAAC,KAAK;EAC/H;EACA,MAAMC,SAAS,GAAGV,cAAc,CAAC,CAAC;EAClC,MAAM,CAACW,OAAO,EAAEC,UAAU,CAAC,GAAGhB,QAAQ,CAAC,EAAE,CAAC;EAC5C,MAAMiB,kBAAkB,GAAG,MAAAA,CAAA,KAAY;IACrC,IAAI;MACFD,UAAU,CAAC,IAAI,CAAC;MAChB;MACA,MAAME,QAAQ,GAAG,MAAMhB,KAAK,CAACiB,KAAK,CAACC,oBAAoB,EAAE;QACvDC,QAAQ,EAAER,OAAO;QACjBS,WAAW,EAAEZ,kBAAkB;QAC/Ba,eAAe,EAAEZ;MACnB,CAAC,CAAC;;MAEF;MACA,IAAIO,QAAQ,CAACM,MAAM,KAAK,GAAG,EAAE;QAC3B;QACAC,OAAO,CAACC,GAAG,CAAC,eAAe,EAAER,QAAQ,CAACS,IAAI,CAAC;QAC3Cb,SAAS,CAAC,gCAAgC,EAAE,SAAS,CAAC;QACtDE,UAAU,CAAC,KAAK,CAAC;;QAEjB;QACAR,SAAS,CAAC,CAAC;MACb,CAAC,MAAM;QACL;QACAoB,cAAc,CAACV,QAAQ,CAAC;MAC1B;IACF,CAAC,CAAC,OAAOW,KAAK,EAAE;MACd;MACAb,UAAU,CAAC,KAAK,CAAC;MACjBY,cAAc,CAACC,KAAK,CAAC;IACvB;EACF,CAAC;EAED,MAAMD,cAAc,GAAIC,KAAK,IAAK;IAChCJ,OAAO,CAACI,KAAK,CAAC,4BAA4B,EAAEA,KAAK,CAAC;IAElD,IAAIA,KAAK,CAACX,QAAQ,EAAE;MAClB;MACA,MAAM;QAAEM,MAAM;QAAEG;MAAK,CAAC,GAAGE,KAAK,CAACX,QAAQ;MACvC,IAAIM,MAAM,KAAK,GAAG,IAAIG,IAAI,IAAIA,IAAI,CAACG,OAAO,KAAK,2BAA2B,EAAE;QAC1EhB,SAAS,CAAC,2BAA2B,EAAE,OAAO,CAAC;QAC/CE,UAAU,CAAC,KAAK,CAAC;MACnB,CAAC,MAAM;QACL;QACAF,SAAS,CAAC,6CAA6C,EAAE,OAAO,CAAC;QACjEE,UAAU,CAAC,KAAK,CAAC;MACnB;IACF,CAAC,MAAM;MACL;MACAF,SAAS,CAAC,6CAA6C,EAAE,OAAO,CAAC;IACnE;IACAE,UAAU,CAAC,KAAK,CAAC;IACjB;IACAR,SAAS,CAAC,CAAC;EACb,CAAC;EAGCiB,OAAO,CAACC,GAAG,CAAC,6BAA6B,EAAEd,SAAS,CAAC;EACrD,oBACEb,KAAA,CAAAgC,aAAA;IACEC,SAAS,EAAG,GACVzB,MAAM,GAAG,qBAAqB,GAAG,qBAClC,iEAAiE;IAAA0B,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBAElEvC,KAAA,CAAAgC,aAAA;IAAKC,SAAS,EAAC,+CAA+C;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBAC5DvC,KAAA,CAAAgC,aAAA;IAAKC,SAAS,EAAC,qGAAqG;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBAClHvC,KAAA,CAAAgC,aAAA;IAAKC,SAAS,EAAC,EAAE;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBACjBvC,KAAA,CAAAgC,aAAA;IAAKC,SAAS,EAAC,gDAAgD;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBAC7DvC,KAAA,CAAAgC,aAAA;IAAIC,SAAS,EAAC,mCAAmC;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAC,iBAAmB,CAAC,eACtEvC,KAAA,CAAAgC,aAAA;IAAGC,SAAS,EAAC,wBAAwB;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAC,+DAAgE,CACnG,CAAC,eACNvC,KAAA,CAAAgC,aAAA;IAAKC,SAAS,EAAC,kBAAkB;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBAC/BvC,KAAA,CAAAgC,aAAA;IAAKC,SAAS,EAAC,0BAA0B;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBACrCvC,KAAA,CAAAgC,aAAA;IAAKQ,GAAG,EAAEtC,KAAM;IAACuC,GAAG,EAAC,EAAE;IAAAP,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CAAE,CACxB,CAAC,eACNvC,KAAA,CAAAgC,aAAA;IAAAE,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAG,yCAAkC,EAAC5B,kBAAkB,EAAC,MAAI,EAACE,SAAS,EAAC,sBAAoB,EAACD,oBAAwB,CAElH,CAAC,eACJZ,KAAA,CAAAgC,aAAA;IAAKC,SAAS,EAAC,oCAAoC;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBAOjDvC,KAAA,CAAAgC,aAAA;IACEU,IAAI,EAAC,QAAQ;IACbC,OAAO,EAAEzB,kBAAmB;IAC5Be,SAAS,EAAG,0DACVjB,OAAO,GAAG,gCAAgC,GAAG,EAC9C,EAAE;IACH4B,QAAQ,EAAE5B,OAAQ;IAAAkB,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAEjBvB,OAAO,iBACNhB,KAAA,CAAAgC,aAAA;IAAKC,SAAS,EAAC,uEAAuE;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBACpFvC,KAAA,CAAAgC,aAAA;IAAKC,SAAS,EAAC,QAAQ;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CAAM,CAC1B,CACN,EACAvB,OAAO,GAAG,eAAe,GAAG,SACvB,CAAC,eACThB,KAAA,CAAAgC,aAAA;IACEC,SAAS,EAAC,6DAA6D;IACvEU,OAAO,EAAEjC,QAAS;IAAAwB,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GACnB,QAEO,CACL,CACF,CACF,CACF,CACF,CAAC;AAEV,CAAC;AAED,eAAehC,oBAAoB"},"metadata":{},"sourceType":"module"}