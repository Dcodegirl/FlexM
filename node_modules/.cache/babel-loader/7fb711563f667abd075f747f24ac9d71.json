{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\USER\\\\Documents\\\\flexiMoney-web-app\\\\src\\\\pages\\\\createAgent\\\\index.js\";\nimport React, { useState, useReducer, useEffect } from 'react';\nimport axios from 'axios';\nimport { useCustomToast } from '../../components/toast/useCustomToast';\nimport { withRouter } from 'react-router-dom';\nimport agentDataReducer, { initialState } from './agent-reducer';\nimport { REGISTER_AGENT, REGISTRATION_SELECT } from '../../utils/constants';\nimport PersonalDetails from './PersonalDetails';\nimport BusinessDetails from './BusinessDetails';\nimport AccountDetails from './AccountDetails';\nimport NavHome from '../../components/layout/HomeNavBar';\nimport styles from './index.module.scss';\nconst CreateAgent = ({\n  history\n}) => {\n  const showToast = useToasts();\n  const [agentData, dispatch] = useReducer(agentDataReducer, initialState);\n  const [status, setStatus] = useState('personal');\n  const [loading, setLoading] = useState(false);\n  const [state, setState] = useState({});\n  useEffect(() => {\n    let isCancelled = false;\n    (async function fecthRegistrationSelects() {\n      try {\n        const res = await axios.get(REGISTRATION_SELECT);\n        const state = res.data.data;\n        if (!isCancelled) localStorage.setItem('Registration-select', JSON.stringify(state));\n        setState(state);\n      } catch (e) {\n        console.log(e);\n      } finally {\n        setLoading(false);\n      }\n    })();\n    return () => {\n      isCancelled = true;\n    };\n  }, []);\n  const createAgent = agentData => {\n    setLoading(true);\n    (async function create() {\n      const payload = agentData;\n      try {\n        const res = await axios.post(REGISTER_AGENT, payload);\n        const message = res.data.message;\n        if (res) {\n          setLoading(false);\n          addToast(message, {\n            appearance: 'success',\n            autoDismiss: true,\n            autoDismissTimeout: 3000\n          });\n          history.push('/login');\n        }\n      } catch (e) {\n        setLoading(false);\n        addToast(e.response.data.data, {\n          appearance: 'error',\n          autoDismiss: true,\n          autoDismissTimeout: 3000\n        });\n      }\n    })();\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.register,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(NavHome, {\n    theme: \"dark\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.createAgent,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.create,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.steps,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: status === 'personal' ? `${styles.tab} ${styles.tabActive}` : `${styles.tab}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 25\n    }\n  }, \"Personal\"), /*#__PURE__*/React.createElement(\"span\", {\n    className: status === 'business' ? `${styles.tab} ${styles.tabActive}` : `${styles.tab}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 25\n    }\n  }, \"Business\"), /*#__PURE__*/React.createElement(\"span\", {\n    className: status === 'account' ? `${styles.tab} ${styles.tabActive}` : `${styles.tab}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 25\n    }\n  }, \"Account\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.content,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 21\n    }\n  }, {\n    personal: /*#__PURE__*/React.createElement(PersonalDetails, {\n      agentData: agentData,\n      dispatch: dispatch,\n      setStatus: setStatus,\n      state: state,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 37\n      }\n    }),\n    business: /*#__PURE__*/React.createElement(BusinessDetails, {\n      agentData: agentData,\n      dispatch: dispatch,\n      setStatus: setStatus,\n      state: state,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 37\n      }\n    }),\n    account: /*#__PURE__*/React.createElement(AccountDetails, {\n      agentData: agentData,\n      dispatch: dispatch,\n      setStatus: setStatus,\n      createAgent: createAgent,\n      loading: loading,\n      state: state,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 37\n      }\n    })\n    // file: <FileUploads />,\n  }[status]))));\n};\nconst CreateAgentWithRouter = withRouter(CreateAgent);\nexport default CreateAgentWithRouter;","map":{"version":3,"names":["React","useState","useReducer","useEffect","axios","useCustomToast","withRouter","agentDataReducer","initialState","REGISTER_AGENT","REGISTRATION_SELECT","PersonalDetails","BusinessDetails","AccountDetails","NavHome","styles","CreateAgent","history","showToast","useToasts","agentData","dispatch","status","setStatus","loading","setLoading","state","setState","isCancelled","fecthRegistrationSelects","res","get","data","localStorage","setItem","JSON","stringify","e","console","log","createAgent","create","payload","post","message","addToast","appearance","autoDismiss","autoDismissTimeout","push","response","createElement","className","register","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","theme","steps","tab","tabActive","content","personal","business","account","CreateAgentWithRouter"],"sources":["C:/Users/USER/Documents/flexiMoney-web-app/src/pages/createAgent/index.js"],"sourcesContent":["import React, { useState, useReducer, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport { useCustomToast } from '../../components/toast/useCustomToast';\r\nimport { withRouter } from 'react-router-dom';\r\nimport agentDataReducer, { initialState } from './agent-reducer';\r\nimport { REGISTER_AGENT, REGISTRATION_SELECT } from '../../utils/constants';\r\nimport PersonalDetails from './PersonalDetails';\r\nimport BusinessDetails from './BusinessDetails';\r\nimport AccountDetails from './AccountDetails';\r\n\r\nimport NavHome from '../../components/layout/HomeNavBar';\r\n\r\nimport styles from './index.module.scss';\r\n\r\nconst CreateAgent = ({ history }) => {\r\n    const showToast  = useToasts();\r\n    const [agentData, dispatch] = useReducer(agentDataReducer, initialState);\r\n    const [status, setStatus] = useState('personal');\r\n    const [loading, setLoading] = useState(false);\r\n    const [state, setState] = useState({});\r\n \r\n\r\n    useEffect(() => {\r\n        let isCancelled = false;\r\n\r\n        (async function fecthRegistrationSelects() {\r\n            try {\r\n                const res = await axios.get(REGISTRATION_SELECT);\r\n                const state = res.data.data;\r\n\r\n                if (!isCancelled)\r\n                    localStorage.setItem(\r\n                        'Registration-select',\r\n                        JSON.stringify(state)\r\n                    );\r\n                setState(state);\r\n            } catch (e) {\r\n                console.log(e)\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        })();\r\n\r\n        return () => {\r\n            isCancelled = true;\r\n        };\r\n    }, []);\r\n\r\n    const createAgent = (agentData) => {\r\n        setLoading(true);\r\n\r\n        (async function create() {\r\n            const payload = agentData;\r\n\r\n            try {\r\n                const res = await axios.post(REGISTER_AGENT, payload);\r\n                const message = res.data.message;\r\n                \r\n                if (res) {\r\n                    \r\n                    setLoading(false);\r\n                 \r\n                    addToast(\r\n                        message,\r\n                        {\r\n                            appearance: 'success',\r\n                            autoDismiss: true, \r\n                            autoDismissTimeout: 3000\r\n                        }\r\n                    );\r\n\r\n                    history.push('/login');\r\n                }\r\n            } catch (e) {\r\n                \r\n                setLoading(false);\r\n                addToast(e.response.data.data, {\r\n                    appearance: 'error',\r\n                    autoDismiss: true, \r\n                    autoDismissTimeout: 3000\r\n                });\r\n            }\r\n        })();\r\n    };\r\n\r\n    return (\r\n        <div className={styles.register}>\r\n            <NavHome theme='dark' />\r\n            <div className={styles.createAgent}>\r\n                <div className={styles.create}>\r\n                    <div className={styles.steps}>\r\n                        <span\r\n                            className={\r\n                                status === 'personal'\r\n                                    ? `${styles.tab} ${styles.tabActive}`\r\n                                    : `${styles.tab}`\r\n                            }\r\n                        >\r\n                            Personal\r\n                        </span>\r\n                        <span\r\n                            className={\r\n                                status === 'business'\r\n                                    ? `${styles.tab} ${styles.tabActive}`\r\n                                    : `${styles.tab}`\r\n                            }\r\n                        >\r\n                            Business\r\n                        </span>\r\n                        <span\r\n                            className={\r\n                                status === 'account'\r\n                                    ? `${styles.tab} ${styles.tabActive}`\r\n                                    : `${styles.tab}`\r\n                            }\r\n                        >\r\n                            Account\r\n                        </span>\r\n                        {/* <span\r\n              className={\r\n                status === \"file\"\r\n                  ? `${styles.tab} ${styles.tabActive}`\r\n                  : `${styles.tab}`\r\n              }\r\n            >\r\n              Files\r\n            </span> */}\r\n                    </div>\r\n                    <div className={styles.content}>\r\n                        {\r\n                            {\r\n                                personal: (\r\n                                    <PersonalDetails\r\n                                        agentData={agentData}\r\n                                        dispatch={dispatch}\r\n                                        setStatus={setStatus}\r\n                                        state={state}\r\n                                    />\r\n                                ),\r\n                                business: (\r\n                                    <BusinessDetails\r\n                                        agentData={agentData}\r\n                                        dispatch={dispatch}\r\n                                        setStatus={setStatus}\r\n                                        state={state}\r\n                                    />\r\n                                ),\r\n                                account: (\r\n                                    <AccountDetails\r\n                                        agentData={agentData}\r\n                                        dispatch={dispatch}\r\n                                        setStatus={setStatus}\r\n                                        createAgent={createAgent}\r\n                                        loading={loading}\r\n                                        state={state}\r\n                                    />\r\n                                ),\r\n                                // file: <FileUploads />,\r\n                            }[status]\r\n                        }\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst CreateAgentWithRouter = withRouter(CreateAgent);\r\n\r\nexport default CreateAgentWithRouter;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}