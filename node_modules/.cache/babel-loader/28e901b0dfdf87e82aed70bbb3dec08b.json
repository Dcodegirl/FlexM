{"ast":null,"code":"// authMiddleware.js\nimport axios from './axiosInstance';\nimport { startLogout } from '../actions/auth';\nimport store from '../store/configureStore';\nimport history from '../utils/history';\nconst {\n  dispatch\n} = store();\nexport const authMiddleware = () => {\n  return axios.interceptors.response.use(response => {\n    return response;\n  }, error => {\n    if (error.response && error.response.status === 401) {\n      dispatch(startLogout());\n      // Redirect to SessionExpired component\n      history.push('/session-expired');\n      return Promise.resolve({\n        data: {}\n      }); // Resolve the promise to prevent the default error handling\n    }\n\n    return Promise.reject(error);\n  });\n};","map":{"version":3,"names":["axios","startLogout","store","history","dispatch","authMiddleware","interceptors","response","use","error","status","push","Promise","resolve","data","reject"],"sources":["C:/Users/USER/Documents/flexiMoney-web-app/src/utils/authMiddleware.js"],"sourcesContent":["// authMiddleware.js\r\nimport axios from './axiosInstance';\r\nimport { startLogout } from '../actions/auth';\r\nimport store from '../store/configureStore';\r\nimport history from '../utils/history';\r\n\r\nconst { dispatch } = store();\r\n\r\nexport const authMiddleware = () => {\r\n  return axios.interceptors.response.use(\r\n    (response) => {\r\n      return response;\r\n    },\r\n    (error) => {\r\n      if (error.response && error.response.status === 401) {\r\n        dispatch(startLogout());\r\n        // Redirect to SessionExpired component\r\n        history.push('/session-expired');\r\n        return Promise.resolve({ data: {} }); // Resolve the promise to prevent the default error handling\r\n      }\r\n      return Promise.reject(error);\r\n    }\r\n  );\r\n};\r\n"],"mappings":"AAAA;AACA,OAAOA,KAAK,MAAM,iBAAiB;AACnC,SAASC,WAAW,QAAQ,iBAAiB;AAC7C,OAAOC,KAAK,MAAM,yBAAyB;AAC3C,OAAOC,OAAO,MAAM,kBAAkB;AAEtC,MAAM;EAAEC;AAAS,CAAC,GAAGF,KAAK,CAAC,CAAC;AAE5B,OAAO,MAAMG,cAAc,GAAGA,CAAA,KAAM;EAClC,OAAOL,KAAK,CAACM,YAAY,CAACC,QAAQ,CAACC,GAAG,CACnCD,QAAQ,IAAK;IACZ,OAAOA,QAAQ;EACjB,CAAC,EACAE,KAAK,IAAK;IACT,IAAIA,KAAK,CAACF,QAAQ,IAAIE,KAAK,CAACF,QAAQ,CAACG,MAAM,KAAK,GAAG,EAAE;MACnDN,QAAQ,CAACH,WAAW,CAAC,CAAC,CAAC;MACvB;MACAE,OAAO,CAACQ,IAAI,CAAC,kBAAkB,CAAC;MAChC,OAAOC,OAAO,CAACC,OAAO,CAAC;QAAEC,IAAI,EAAE,CAAC;MAAE,CAAC,CAAC,CAAC,CAAC;IACxC;;IACA,OAAOF,OAAO,CAACG,MAAM,CAACN,KAAK,CAAC;EAC9B,CACF,CAAC;AACH,CAAC"},"metadata":{},"sourceType":"module"}